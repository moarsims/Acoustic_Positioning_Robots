/*This is a neat trick I ran across while considering the implementation of a Discrete Time Fourier Transform(DTFT) algorithm in an arduino.
The point was to nail down the time it takes to analogRead inorder to determine how much time I would add between analogReads in order to get a specific sampling rate.*/

void setup() {
  Serial.begin(9600);
  while (!Serial); // Wait for Serial to be ready

  // --- Set ADC Prescaler to 32 (16 MHz / 32 = 500 kHz) ---
  ADCSRA = (ADCSRA & 0b11111000) | 0x05;

  // --- Measure analogRead() Duration ---
  unsigned long timeBefore = micros();

  int value = analogRead(A0);

  unsigned long timeAfter = micros();

  // --- Print Timing Info ---
  Serial.print("Time before analogRead: ");
  Serial.println(timeBefore);
  Serial.print("Value: ");
  Serial.println(value);
  Serial.print("Time after analogRead: ");
  Serial.println(timeAfter);
  Serial.print("Elapsed time: ");
  Serial.print(timeAfter - timeBefore);
  Serial.println(" microseconds");

  while (true); // Halt program
}

void loop() {
  // Unused
}
